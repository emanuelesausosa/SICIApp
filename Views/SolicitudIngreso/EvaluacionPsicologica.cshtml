@model SICIApp.Entities.INGRESO

@{
    ViewBag.Title = "Evaluacion Psicologica";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-sm-4">
        <h2>Project detail</h2>
        <ol class="breadcrumb">
            <li>
                <a href="@Url.Action("Dashboard_1", "Dashboards")">Home</a>
            </li>
            <li class="active">
                <strong>Project detail</strong>
            </li>
        </ol>
    </div>
</div>
<div class="row">
    <div class="wrapper wrapper-content animated fadeInUp">
        <div class="ibox">
            <div class="ibox-content">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="m-b-md">
                            <a href="#" class="btn btn-white btn-xs pull-right">Edit project</a>
                            <h2>Contract with Zender Company</h2>
                        </div>
                        <dl class="dl-horizontal">
                            <dt>Status:</dt>
                            @if (Model.ACEPTADO == true)
                            {
                                <dd><span class="label label-primary">Aceptado</span></dd>
                            }
                            else
                            {
                                <dd><span class="label label-warning">En proceso</span></dd>
                            }

                            
                        </dl>
                    </div>
                </div>
                <div class="row">                  
                        <dl class="dl-horizontal">

                            <dt>Nombre del paciente:</dt>
                            <dd>@Model.FICHA.PRIMERNOMBRE @Model.FICHA.SEGUNDONOMBRE @Model.FICHA.PRIMERAPELLIDO @Model.FICHA.SEGUNDOAPELLIDO</dd>
                            <dt>Cógigo ingreso:</dt>
                            <dd id="@Model.ID">@Model.ID</dd>
                            <dt>Client:</dt>
                            <dd><a href="#" class="text-navy"> Zender Company</a> </dd>
                            <dt>Version:</dt>
                            <dd> 	v1.4.2 </dd>
                        </dl>                    
                    <div class="col-lg-7" id="cluster_info">
                        <dl class="dl-horizontal">

                            <dt>Last Updated:</dt>
                            <dd>16.08.2014 12:15:57</dd>
                            <dt>Created:</dt>
                            <dd> 	10.07.2014 23:36:57 </dd>
                            <dt>Participants:</dt>
                            <dd class="project-people">
                                <a href=""><img alt="image" class="img-circle" src="~/Images/a3.jpg"></a>
                                <a href=""><img alt="image" class="img-circle" src="~/Images/a1.jpg"></a>
                                <a href=""><img alt="image" class="img-circle" src="~/Images/a2.jpg"></a>
                                <a href=""><img alt="image" class="img-circle" src="~/Images/a4.jpg"></a>
                                <a href=""><img alt="image" class="img-circle" src="~/Images/a5.jpg"></a>
                            </dd>
                        </dl>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <dl class="dl-horizontal">
                            <dt>Completed:</dt>
                            <dd>
                                <div class="progress progress-striped active m-b-sm">
                                    <div style="width: 60%;" class="progress-bar"></div>
                                </div>
                                <small>Project completed in <strong>60%</strong>. Remaining close the project, sign a contract and invoice.</small>
                            </dd>
                        </dl>
                    </div>
                </div>

            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Proceso de Ingreso de pacientes<small class="m-l-sm">Evaluación Psicológica</small></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li>
                                    <a href="#">Config option 1</a>
                                </li>
                                <li>
                                    <a href="#">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="tabs-container">
                                    <ul class="nav nav-tabs">
                                        <li class="active"><a data-toggle="tab" href="#tab-1">Condición Social y Familiar</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-2">Observación Preliminar</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-3">Historial Personal-Familiar</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-4">Estado Mental</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-5">Impresión Diagnóstica</a></li>
                                        <li class=""><a data-toggle="tab" href="#tab-6">Recomendaciones</a></li>
                                    </ul>
                                    <div class="tab-content">
                                        <div id="tab-1" class="tab-pane active">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>                                                    
                                                        <input id="@Model.ID" name="@Model.ID" type="hidden" />
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Condición Familiar</label>                                                                        
                                                                        <textarea id="CONDICIONFAMILIAR" name="CONDICIONFAMILIAR" class="summernote" placeholder="@Model.DATOSSOCIOECONOMICOS.CONDICIONFAMILIAR">
                                                                            @Model.DATOSSOCIOECONOMICOS.CONDICIONFAMILIAR
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Situación Social</label>
                                                                        <textarea id="SITUACIONSOACIAL" name="SITUACIONSOACIAL" class="summernote" placeholder="@Model.DATOSSOCIOECONOMICOS.SITUACIONSOACIAL" >
                                                                            @Model.DATOSSOCIOECONOMICOS.SITUACIONSOACIAL
                                                                        </textarea>                                                                        
                                                                </div>
                                                            </div>
                                                            <hr />
                                                           </div>
                                                            <div class="row">
                                                                <div class="form-group">
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-psds" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-2" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>
                                                        @using (Html.BeginForm())
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Problemas que presenta</label>
                                                                        <textarea id="PROBLEMAS" name="PROBLEMAS" class="summernote">
                                                                            @Model.OBERVACIONPRELIMINAR.PROBLEMAS
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />                                                            
                                                            <div class="row">                                                                
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-psop" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>                                                               
                                                            </div>
                                                        }
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-3" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>
                                                        @using (Html.BeginForm())
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Descripción de su historia</label>
                                                                        <textarea id="HISTORIALPERSONALFAMILIAR" name="HISTORIALPERSONALFAMILIAR" class="summernote">
                                                                            @Model.HISTORIALPERSONALFAMILIAR.DESCRIPCION
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="form-group">
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-pshf" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-4" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>
                                                        @using (Html.BeginForm())
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Descripción de su Estado Mental</label>
                                                                        <textarea id="ESTADOMENTAL" name="ESTADOMENTAL" class="summernote">
                                                                            @Model.ESTADOMENTAL.DESCRIPCION
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="form-group">
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-psem" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-5" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>
                                                        @using (Html.BeginForm())
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Impresión Diagnóstica</label>
                                                                        <textarea id="IMPRESIONDIAGNOSTICA" name="IMPRESIONDIAGNOSTICA" class="summernote">
                                                                            @Model.IMPRESIONDIAGNOSTICA.DESCRIPCION
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="form-group">
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-psid" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="tab-6" class="tab-pane">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <fieldset>
                                                        @using (Html.BeginForm())
                                                        {
                                                            @Html.AntiForgeryToken()
                                                            <div class="row">
                                                                <div class="col-lg-12">
                                                                    <div class="form-group">
                                                                        <label>Recomendaciones</label>
                                                                        <textarea id="RECOMENDACIONES" name="RECOMENDACIONES" class="summernote">
                                                                            @Model.RECOMENDACIONES.DESCRIPCION
                                                                        </textarea>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <hr />
                                                            <div class="row">
                                                                <div class="form-group">
                                                                    <div class="col-md-offset-2 col-md-10">
                                                                        <input id="save-psre" data-id="@Model.ID" type="button" value="Guardar" class="btn btn-primary" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                    </fieldset>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ibox-footer">
                        <span class="pull-right">
                            The righ side of the footer
                        </span>
                        This is simple footer example
                    </div>
                </div>
            </div>
        </div>        
        <div class="row">
            <div class="col-lg-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>Basic IN+ Panel <small class="m-l-sm">This is custom panel</small></h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="fa fa-wrench"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-user">
                                <li>
                                    <a href="#">Config option 1</a>
                                </li>
                                <li>
                                    <a href="#">Config option 2</a>
                                </li>
                            </ul>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div class="row">
                            <div class="ibox-content forum-container">
                                <div class="forum-title">
                                    <div class="pull-right forum-desc">
                                        <samll>Total posts: 320,800</samll>
                                    </div>
                                    <h3>General subjects</h3>
                                </div>
                                <div class="forum-item active">
                                    <div class="row">
                                        <div class="col-md-9">
                                            <div class="forum-icon">
                                                <i class="fa fa-shield"></i>
                                            </div>
                                            <a href="@Url.Action("Forum_post_view", "Miscellaneous")" class="forum-item-title">General Discussion</a>
                                            <div class="forum-sub-title">Talk about sports, entertainment, music, movies, your favorite color, talk about enything.</div>
                                        </div>
                                        <div class="col-md-1 forum-info">
                                            <span class="views-number">
                                                1216
                                            </span>
                                            <div>
                                                <small>Views</small>
                                            </div>
                                        </div>
                                        <div class="col-md-1 forum-info">
                                            <span class="views-number">
                                                368
                                            </span>
                                            <div>
                                                <small>Topics</small>
                                            </div>
                                        </div>
                                        <div class="col-md-1 forum-info">
                                            <span class="views-number">
                                                140
                                            </span>
                                            <div>
                                                <small>Posts</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ibox-footer">
                        <span class="pull-right">
                            The righ side of the footer
                        </span>
                        This is simple footer example
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>
@section Styles {
    @Styles.Render("~/plugins/summernoteStyles")
    @Styles.Render("~/plugins/toastrStyles")
}

@section Scripts {
    @Scripts.Render("~/plugins/summernote")
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/plugins/toastr")
    <script type="text/javascript">
        $(document).ready(function () {

            $('.summernote').summernote();            
            
        });

        $('#save-psds').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                condicionfamiliar: $('#CONDICIONFAMILIAR').code(),
                situacionsoacial: $('#SITUACIONSOACIAL').code()                
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarCondicionFamiliar',
                type: 'post',                
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
        $('#save-psop').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                problemas: $('#PROBLEMAS').code(),
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarObservacionPreliminar',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
        $('#save-pshf').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                descripcion: $('#HISTORIALPERSONALFAMILIAR').code(),
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarHistorialPersonalFamiliar',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
        $('#save-psem').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                descripcion: $('#ESTADOMENTAL').code(),
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarEstadoMental',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
        $('#save-psid').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                descripcion: $('#IMPRESIONDIAGNOSTICA').code(),
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarImpresionDiagnostica',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
        $('#save-psre').click(function () {

            //var myText = $('textarea[name="SITUACIONSOACIAL"]').html($('#SITUACIONSOACIAL').code());
            //var sHTML = $('#summernote').code();
            var element = this;

            var _model = {
                idingreso: $(this).attr('data-id'),
                descripcion: $('#RECOMENDACIONES').code(),
            }

            toastr.info('Procesando', 'se ha procesado la solicitud');

            $.ajax({
                url: '/SolicitudIngreso/EditarRecomendaciones',
                type: 'post',
                contentType: 'application/json; charset=utf-8',
                processData: false,
                datatype: 'json',
                data: JSON.stringify(_model),
                success: function (data) {
                    if (data.success) {
                        toastr.success(data.message, 'Éxito');
                    }
                    else {
                        toastr.error(data.message, 'Error');
                    }

                },
                error: function (req, status, err) {
                    alert('error desconocido! ' + err);
                },
                async: true,
                processData: false

            });
        });
    </script>
    <script type="text/javascript">

    </script>
}


